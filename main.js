(()=>{"use strict";class t{#t;#e;#i;#s;constructor(e,i,s,o){console.log(`Creating new Project: ${e}`),i||0===i?(this.#t=i,console.log("project ID#",i,"provided."),t.id=i):(console.log("No Project ID# provided, creating new ID#",t.id),this.#t=t.id),t.id+=1,console.log("Project.id is now set to",t.id),this.#e=e||"-",this.#i=s||!1,this.#s=o||[]}static id=0;getTitle=()=>this.#e;getStatus=()=>this.#i;getTodoList=()=>this.#s;getID=()=>this.#t;setTitle=t=>{this.#e=t,console.log(this.#e)};addTodo=t=>{this.#s.push(t),console.log(`To-do${t}added successfully.`)};toggleStatus=()=>{this.#i=!this.#i};removeTodo=t=>{console.log(`Removing Todo-list-item ${t}`);const e=this.#s.indexOf(t);this.#s.splice(e,1)}}class e{#t;#o;#e;#n;#c;#a;#r;#l;#i;constructor(t,i,s,o,n,c,a,r,l){a||0===a?(console.log(`Retrieving existing Todo id#${a}`),this.#t=a,e.id=a):(console.log(`Creating new Todo id#${a}`),this.#t=e.id),e.id+=1,this.#o=c,this.#e=t||"-",this.#n=i||"-",this.#c=s?this.setDue(s):"--/--/----",this.#a=this.setPriority(o),this.#r=n||"-",this.#l=r||[],this.#i=l||!1}static id=0;getTitle=()=>this.#e;getDescription=()=>this.#n;getDue=()=>this.#c;getPriority=()=>this.#a;getNotes=()=>this.#r;getStatus=()=>this.#i;getChecklist=()=>this.#l;getID=()=>this.#t;getProjectId=()=>this.#o;setTitle=t=>{this.#e=t};setDescription=t=>{this.#n=t};setDue=t=>(this.#c=t,t);setPriority=t=>{let e=Number(t);return console.log("Debugging, logging newPriority",e),e="NaN"===e?0:e,e=e<=0?0:e,e=e>=3?3:e,this.#a=e,e};setNotes=t=>{this.#r=t};addChecklistItem=t=>{this.#l.push(t)};removeChecklistItem=t=>{console.log(`Removing checklist-item ${t}`);const e=this.#l.indexOf(t);this.#l.splice(e,1)};toggleStatus=()=>{this.#i=!this.#i}}class i{#t;#o;#e;#i;constructor(t,e,s,o){s||0===s?(this.#t=s,i.id=s):this.#t=i.id,i.id+=1,this.#o=e,this.#e=t||" ",this.#i=o||!1}static id=0;getTitle=()=>this.#e;getStatus=()=>this.#i;getID=()=>this.#t;getTodoID=()=>this.#o;setTitle=t=>{this.#e=t};toggleStatus=()=>{this.#i=!this.#i}}class s{constructor(t,e){this._ID=t,this._del=this._makeDelete(),this._statusBool=e}updateTitle(t){this._title.textContent=t}toggleStatus(){this._statusBool=!this._statusBool,this._status.textContent=this._statusBool?"✔️":"⭕",this._status.classList.toggle("complete"),this._status.classList.toggle("in-progress")}_makeTitle(t,e){return this._title=document.createElement("span"),this._title.classList.add(t,"title"),this._title.textContent=e,this._title}_makeDelete(){return this._del=document.createElement("button"),this._del.classList.add("delete"),this._del.textContent="x",this._del}_makeStatus(t,e){return this._status=document.createElement("button"),this._status.classList.add(t,"status-btn"),e?(this._status.classList.add("complete"),this._status.textContent="✔️"):(this._status.classList.add("in-progress"),this._status.textContent="⭕"),this._status}_makeTitleContainer(t,e,i){return this._titleContainer=document.createElement("div"),this._titleContainer.classList.add(t,"title","container"),this._titleContainer.appendChild(this._del),this._titleContainer.appendChild(e),this._titleContainer.appendChild(i),this._titleContainer}_makeContainer(t,e,...i){return this._container=document.createElement("div"),this._container.id=t,this._container.classList.add(`${e}-container`),i.forEach((t=>{this._container.appendChild(t)})),this._container}getdID=()=>this._divID;getStatus=()=>this._status;getTitle=()=>this._title;getDel=()=>this._del}class o extends s{#d;#h;constructor(t,e,i){console.log(`Starting UIProject #${t} creation.`),super(t,i),this._type="project",this._title=this._makeTitle(this._type,e),this._divID=`${this._type}-${this._ID}`,this._status=this._makeStatus(this._type,this._statusBool),this._titleContainer=this._makeTitleContainer(this._type,this._title,this._status),this.#d=this.#u(),this.#h=this._makeContainer(this._divID,this._type,this._titleContainer,this.#d),this.#g(),console.log(`UIProject #${t} creation successful.`)}#u(){return this.#d=document.createElement("div"),this.#d.classList.add("todos","container"),this.#d}#g(){document.querySelector(".body.inner-container").appendChild(this.#h)}appendTodo(t){this.#d.appendChild(t)}getProjectNode=()=>this.#h}class n extends s{#h;constructor(t,e,i){super(t,i),this._type="checklist-item",this._divID=`${this._type}-${this._ID}`,this._title=this._makeTitle("checklist-item",e),this._status=this._makeStatus("checklist-item",this._statusBool),this._titleContainer=this._makeTitleContainer(this._type,this._title,this._status),this.#h=this._makeContainer(this._divID,this._type,this._titleContainer)}getChecklistItem=()=>this.#h}class c extends s{#p;#n;#c;#a;#r;#D;#h;constructor(t,e,i,s,o,n,c){console.log(`Starting UITodo #${t} creation.`),super(t,c),this._type="todo",this._divID=`${this._type}-${this._ID}`,this._title=this._makeTitle(this._type,e),this._status=this._makeStatus(this._type,this._statusBool),this.#p=this._makeTitleContainer(this._type,this._title,this._status),this.#m(i),this.#I(s),this.#f(o),this.#k(n),this.#_(),this._makeContainer(this._divID,this._type,this.#p,this.#n,this.#c,this.#a,this.#r,this.#D),console.log(`UITodo #${t} creation successful.`)}#m(t){this.#n=document.createElement("div"),this.#n.classList.add("todo","description"),this.#n.textContent=t}#I(t){this.#c=document.createElement("div"),this.#c.classList.add("todo","due"),this.#c.textContent=t}#f(t){let e;switch(this.#a=document.createElement("div"),this.#a.classList.add("todo","priority"),Number(t)){case 1:e="Low";break;case 2:e="Medium";break;case 3:e="High";break;default:e="Trivial"}this.#a.textContent=e}#k(t){this.#r=document.createElement("div"),this.#r.classList.add("todo","notes"),this.#r.textContent=t}#_(){this.#D=document.createElement("div"),this.#D.classList.add("todo","checklist")}appendChecklist(t){this.#D.appendChild(t)}updateDescription(t){this.#n.textContent=t}updateDue(t){this.#c.textContent=t}updateNotes(t){this.#r.textContent=t}updatePriority(t){let e;switch(Number(t)){case 1:e="Low";break;case 2:e="Medium";break;case 3:e="High";break;default:e="Trivial"}this.#a.textContent=e}getTodo=()=>this._container;getDescription=()=>this.#n;getDue=()=>this.#c;getNotes=()=>this.#r;getPriority=()=>this.#a}function a(){function t(t){const e=document.createElement("form");return e.classList.add(`${t}-container`,"form"),e.setAttribute("action","#"),e}function e(t,e,i,s){let o=s;o=o||"text";const n=document.createElement("div");let c;if(n.classList.add(t,e,"container","form"),i.appendChild(n),"description"===e||"notes"===e)c=document.createElement("textarea");else if("priority"===e){c=document.createElement("select");const t=["Trivial","Low","Medium","High"];t.forEach((e=>{const i=document.createElement("option");i.textContent=e,i.setAttribute("value",t.indexOf(e)),c.appendChild(i)}))}else c=document.createElement("input");c.setAttribute("type",o),c.setAttribute("placeholder",`New ${t} ${e}`),c.setAttribute("name",e),"number"===o&&(c.setAttribute("min",0),c.setAttribute("max",3)),c.classList.add(t,e,"form"),n.appendChild(c)}function i(t){const e=document.createElement("button");e.setAttribute("type","submit"),e.classList.add("submit","btn"),e.textContent="Add",t.appendChild(e)}return{projectForm:function(){const s="project",o=t(s);return e(s,"title",o),i(o),document.querySelector(".body.inner-container").appendChild(o),o},todoForm:function(){const s=t("todo"),o="todo";return e(o,"title",s),e(o,"description",s),e(o,"due",s,"date"),e(o,"priority",s,"number"),e(o,"notes",s),i(s),s},checklistItemForm:function(){const s="checklist-item",o=t(s);return e(s,"title",o),i(o),o},editTodoItem:function(t,i,s){const o=t,n=document.createElement("form");n.classList.add(`${i}-container`,"form"),n.setAttribute("action","#"),e(i,s,n),o.appendChild(n)}}}function r(){function t(t,e){return!!localStorage[`${t}-${e}`]&&JSON.parse(localStorage[`${t}-${e}`])}return{newProject:function(t,e,i,s){const o=localStorage.projectIDlist?JSON.parse(localStorage.projectIDlist):[];localStorage[`project-${t}`]||(o.push(t),localStorage.setItem("projectIDlist",JSON.stringify(o)),localStorage.setItem(`project-${t}`,JSON.stringify({type:"project",id:t,title:e,todolistIDs:i,status:s})))},newTodo:function(t,e,i,s,o,n,c,a,r){localStorage[`todo-${t}`]||localStorage.setItem(`todo-${t}`,JSON.stringify({type:"todo",id:t,title:e,description:i,due:s,priority:o,notes:n,projectID:c,checklistIDs:a,status:r}))},newChecklistItem:function(t,e,i,s){localStorage[`checklistitem-${t}`]||localStorage.setItem(`checklistitem-${t}`,JSON.stringify({type:"checklistitem",id:t,title:e,todoID:i,status:s}))},getData:t,modifyData:function(t,e,i,s){const o=JSON.parse(localStorage.getItem(`${t}-${e}`));console.log("Modiffying",i,"attribute from",t,"number",e,"\n","Old value:",o[i]),"checklistIDs"===i||"todolistIDs"===i?o[i].includes(s)||o[i].push(s):o[i]=s,localStorage.setItem(`${t}-${e}`,JSON.stringify(o)),console.log("New value:",o[i])},getProjects:function(){return localStorage.projectIDlist?JSON.parse(localStorage.projectIDlist):[]},removeData:function(e,i){if(console.log("Deleting",e,"number",i,"\n"),"project"===e){const t=JSON.parse(localStorage.projectIDlist);console.log("Previous project id list:",t);const e=t.indexOf(i);t.splice(e,1),localStorage.projectIDlist=JSON.stringify(t),console.log("New project id list:",t)}else if("todo"===e){const{projectID:s}=t(e,i),o=t("project",s),n=o.todolistIDs.indexOf(i);o.todolistIDs.splice(n,1),localStorage[`project-${s}`]=JSON.stringify(o)}else if("checklistitem"===e){const{todoID:s}=t(e,i),o=t("todo",s),n=o.checklistIDs.indexOf(i);o.checklistIDs.splice(n,1),localStorage[`todo-${s}`]=JSON.stringify(o)}localStorage.removeItem(`${e}-${i}`)}}}function l(t,e,i,s){const o=prompt(`New ${s}`);o&&(e.setTitle(o),i.updateTitle(e.getTitle()),r().modifyData(t,e.getID(),s,e.getTitle()))}function d(...t){const e=new i(...t),s=new n(e.getID(),e.getTitle(),e.getStatus());return r().newChecklistItem(e.getID(),e.getTitle(),e.getTodoID(),e.getStatus()),r().modifyData("todo",e.getTodoID(),"checklistIDs",e.getID()),s.getTitle().addEventListener("click",(function(){l("checklistitem",e,s,"title")})),s.getStatus().addEventListener("click",(function(){s.toggleStatus(),e.toggleStatus(),r().modifyData("checklistitem",e.getID(),"status",e.getStatus())})),s.getDel().addEventListener("click",(function(){confirm(`Delete Checklist Item "${e.getTitle()}"?`)&&(r().removeData("checklistitem",e.getID()),s.getChecklistItem().remove())})),{getCLINode:function(){return s.getChecklistItem()},getData:function(){return e}}}function h(...t){const i=new e(...t),s=new c(i.getID(),i.getTitle(),i.getDescription(),i.getDue(),i.getPriority(),i.getNotes(),i.getStatus()),o=a().checklistItemForm();return o.addEventListener("submit",(function(t){t.preventDefault(),t.preventDefault(),s.appendChecklist(d(t.target.title.value,i.getID()).getCLINode())})),s.appendChecklist(o),r().newTodo(i.getID(),i.getTitle(),i.getDescription(),i.getDue(),i.getPriority(),i.getNotes(),i.getProjectId(),i.getChecklist(),i.getStatus()),r().modifyData("project",i.getProjectId(),"todolistIDs",i.getID()),s.getTitle().addEventListener("click",(function(){l("todo",i,s,"title")})),s.getStatus().addEventListener("click",(function(){s.toggleStatus(),i.toggleStatus(),r().modifyData("todo",i.getID(),"status",i.getStatus())})),s.getDel().addEventListener("click",(function(){if(confirm(`Delete Todo "${i.getTitle()}"?`)){const t=i.getID();r().getData("todo",t).checklistIDs.forEach((t=>{r().removeData("checklistitem",t)})),r().removeData("todo",t),s.getTodo().remove()}})),s.getDescription().addEventListener("click",(function(){!function(t,e,i,s){const o=prompt(`New ${s}`);o&&(e.setDescription(o),i.updateDescription(e.getDescription()),r().modifyData("todo",e.getID(),s,e.getDescription()))}(0,i,s,"description")})),s.getDue().addEventListener("click",(function(){!function(t,e,i,s){const o=prompt("New due");o&&(e.setDue(o),i.updateDue(e.getDue()),r().modifyData("todo",e.getID(),"due",e.getDue()))}(0,i,s)})),s.getPriority().addEventListener("click",(function(){!function(t,e,i,s){const o=prompt(`New ${s}`);o&&(e.setPriority(o),i.updatePriority(e.getPriority()),r().modifyData("todo",e.getID(),s,e.getPriority()))}(0,i,s,"priority")})),s.getNotes().addEventListener("click",(function(){!function(t,e,i,s){const o=prompt(`New ${s}`);o&&(e.setNotes(o),i.updateNotes(e.getNotes()),r().modifyData("todo",e.getID(),s,e.getNotes()))}(0,i,s,"notes")})),{getTodoNode:function(){return s.getTodo()},getData:function(){return i},appendChecklistItem:function(t){s.appendChecklist(t)},getID:function(){return i.getID()}}}function u(...e){const i=new t(...e),s=new o(i.getID(),i.getTitle(),i.getStatus());r().newProject(i.getID(),i.getTitle(),i.getTodoList(),i.getStatus());const n=a().todoForm();function c(){l("project",i,s,"title")}return n.addEventListener("submit",(function(t){t.preventDefault(),s.appendTodo(h(t.target.title.value,t.target.description.value,t.target.due.value,t.target.priority.value,t.target.notes.value,i.getID()).getTodoNode())})),s.appendTodo(n),s.getStatus().addEventListener("click",(function(){s.toggleStatus(),i.toggleStatus(),r().modifyData("project",i.getID(),"status",i.getStatus())})),s.getTitle().addEventListener("click",c),s.getDel().addEventListener("click",(function(){confirm(`Delete Project "${i.getTitle()}"?`)&&(r().getData("project",i.getID()).todolistIDs.forEach((t=>{r().getData("todo",t).checklistIDs.forEach((t=>{r().removeData("checklistitem",t)})),r().removeData("todo",t)})),r().removeData("project",i.getID()),s.getProjectNode().remove())})),{getDivID:function(){return s.getProjectId},updateTitle:c,appendTodo:function(t){s.appendTodo(t)},getID:function(){return i.getID()},getProjectNode:function(){return s.getProjectNode()}}}r().getProjects().forEach((t=>{const e=r().getData("project",t),i=u(e.title,e.id,e.status,e.todolistIDs);r().getData("project",t).todolistIDs.forEach((t=>{const e=r().getData("todo",t),s=h(e.title,e.description,e.due,e.priority,e.notes,e.projectID,e.id,e.checklistIDs,e.status);i.appendTodo(s.getTodoNode()),r().getData("todo",t).checklistIDs.forEach((t=>{const e=r().getData("checklistitem",t),i=d(e.title,e.todoID,e.id,e.status);s.appendChecklistItem(i.getCLINode())}))}))})),a().projectForm().addEventListener("submit",(function(t){t.preventDefault(),console.log("Creating new Project from Form."),u(t.target.title.value)}))})();